(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,73375,e=>{"use strict";let t=(0,e.i(75254).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],73375)},63059,e=>{"use strict";let t=(0,e.i(75254).default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],63059)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},43531,e=>{"use strict";let t=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},70956,e=>{"use strict";let t=(0,e.i(75254).default)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);e.s(["List",()=>t],70956)},39616,e=>{"use strict";let t=(0,e.i(75254).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Settings",()=>t],39616)},16451,e=>{"use strict";var t=e.i(43476),s=e.i(71645),i=e.i(18566),l=e.i(84360),a=e.i(73375),r=e.i(63059),n=e.i(31278),d=e.i(70956),o=e.i(63209),c=e.i(39616),h=e.i(22016),m=e.i(55146);function x(){let e=(0,i.useParams)(),x=(0,i.useRouter)(),[u,p]=(0,s.useState)(!1),f=(0,s.useRef)(null),[b,v]=(0,s.useState)(null),[w,g]=(0,s.useState)(e.videoId||"");(0,s.useEffect)(()=>{e.videoId&&e.videoId!==w&&g(e.videoId)},[e.videoId]);let{data:j,isLoading:y}=(0,l.useMeloloDetail)(e.bookId||""),{data:k,isLoading:N,isFetching:C}=(0,l.useMeloloStream)(w),_=j?.data?.video_data,z=k?.data?.video_model,M=(0,s.useMemo)(()=>{if(!z)return[];try{let e=JSON.parse(z).video_list;if(!e)return[];let t=[],s={video_1:"240p",video_2:"360p",video_3:"480p",video_4:"540p",video_5:"720p"};return Object.entries(e).forEach(([e,i])=>{if(i?.main_url)try{let l=atob(i.main_url),a=l.startsWith("http")?l:i.main_url;t.push({name:s[e]||e,url:a})}catch(l){t.push({name:s[e]||e,url:i.main_url})}}),t.reverse()}catch(e){return console.error("Error parsing video model",e),[]}},[z]);(0,s.useEffect)(()=>{if(M.length>0){let e=null;b&&(e=M.find(e=>e.name===b.name)),e||(e=M.find(e=>"720p"===e.name)||M.find(e=>"540p"===e.name)||M.find(e=>"480p"===e.name)||M[0]),e&&e.url!==b?.url&&v(e)}},[M,b]);let L=_?.video_list?.findIndex(e=>e.vid===w)??-1,I=_?.video_list?.length||0,S=t=>{if(!_?.video_list?.[t])return;let s=_.video_list[t].vid;g(s);let i=`/watch/melolo/${e.bookId}/${s}`;window.history.pushState({path:i},"",i),p(!1)};return y||_?(0,t.jsxs)("main",{className:"fixed inset-0 bg-black flex flex-col",children:[(0,t.jsxs)("div",{className:"absolute top-0 left-0 right-0 z-40 h-16 pointer-events-none",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-black/90 via-black/50 to-transparent"}),(0,t.jsxs)("div",{className:"relative z-10 flex items-center justify-between h-full px-4 max-w-7xl mx-auto pointer-events-auto",children:[(0,t.jsxs)(h.default,{href:`/detail/melolo/${e.bookId}`,className:"flex items-center gap-2 text-white/90 hover:text-white transition-colors p-2 -ml-2 rounded-full hover:bg-white/10",children:[(0,t.jsx)(a.ChevronLeft,{className:"w-6 h-6"}),(0,t.jsx)("span",{className:"text-primary font-bold hidden sm:inline shadow-black drop-shadow-md",children:"SekaiDrama"})]}),(0,t.jsxs)("div",{className:"text-center flex-1 px-4 min-w-0",children:[(0,t.jsx)("h1",{className:"text-white font-medium truncate text-sm sm:text-base drop-shadow-md",children:_?.series_title||"Loading..."}),(0,t.jsxs)("p",{className:"text-white/80 text-xs drop-shadow-md",children:["Episode ",-1!==L?L+1:"..."]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(m.DropdownMenu,{children:[(0,t.jsx)(m.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)("button",{className:"p-2 text-white/90 hover:text-white transition-colors rounded-full hover:bg-white/10 flex items-center gap-1",children:[(0,t.jsx)(c.Settings,{className:"w-6 h-6 drop-shadow-md"}),(0,t.jsx)("span",{className:"text-xs font-bold drop-shadow-md hidden sm:inline",children:b?.name||"..."})]})}),(0,t.jsx)(m.DropdownMenuContent,{align:"end",className:"bg-black/90 border-white/10 text-white",children:M.map(e=>(0,t.jsx)(m.DropdownMenuItem,{className:`cursor-pointer ${b?.name===e.name?"bg-white/20":"hover:bg-white/10"}`,onClick:()=>v(e),children:e.name},e.name))})]}),(0,t.jsx)("button",{onClick:()=>p(!u),className:"p-2 text-white/90 hover:text-white transition-colors rounded-full hover:bg-white/10",children:(0,t.jsx)(d.List,{className:"w-6 h-6 drop-shadow-md"})})]})]})]}),(0,t.jsxs)("div",{className:"flex-1 w-full h-full relative bg-black flex flex-col items-center justify-center",children:[(0,t.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center",children:[b?(0,t.jsx)("video",{ref:f,src:b.url,controls:!0,autoPlay:!0,playsInline:!0,onEnded:()=>{-1!==L&&L<I-1&&S(L+1)},className:"w-full h-full object-contain max-h-[100dvh]"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center text-white/50",children:N?"":"Video unavailable"}),(N||C||y)&&(0,t.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 z-30 pointer-events-none",children:(0,t.jsx)(n.Loader2,{className:"w-12 h-12 animate-spin text-primary drop-shadow-md"})})]}),(0,t.jsx)("div",{className:"absolute bottom-20 md:bottom-12 left-0 right-0 z-40 pointer-events-none flex justify-center pb-safe-area-bottom",children:(0,t.jsxs)("div",{className:`flex items-center gap-2 md:gap-6 pointer-events-auto bg-black/60 backdrop-blur-md px-3 py-1.5 md:px-6 md:py-3 rounded-full border border-white/10 shadow-lg transition-all scale-90 md:scale-100 origin-bottom ${u?"opacity-0":"opacity-100"}`,children:[(0,t.jsx)("button",{onClick:()=>L>0&&S(L-1),disabled:L<=0,className:"p-1.5 md:p-2 rounded-full text-white disabled:opacity-30 hover:bg-white/10 transition-colors",children:(0,t.jsx)(a.ChevronLeft,{className:"w-4 h-4 md:w-6 md:h-6"})}),(0,t.jsxs)("span",{className:"text-white font-medium text-xs md:text-sm tabular-nums min-w-[60px] md:min-w-[80px] text-center",children:["Ep ",-1!==L?L+1:"-"," / ",I]}),(0,t.jsx)("button",{onClick:()=>L<I-1&&S(L+1),disabled:L>=I-1,className:"p-1.5 md:p-2 rounded-full text-white disabled:opacity-30 hover:bg-white/10 transition-colors",children:(0,t.jsx)(r.ChevronRight,{className:"w-4 h-4 md:w-6 md:h-6"})})]})})]}),u&&_&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60]",onClick:()=>p(!1)}),(0,t.jsxs)("div",{className:"fixed inset-y-0 right-0 w-72 bg-zinc-900 z-[70] overflow-y-auto border-l border-white/10 shadow-2xl animate-in slide-in-from-right",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-white/10 sticky top-0 bg-zinc-900 z-10 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h2",{className:"font-bold text-white",children:"Daftar Episode"}),(0,t.jsxs)("span",{className:"text-xs text-white/60 bg-white/10 px-2 py-0.5 rounded-full",children:["Total ",I]})]}),(0,t.jsx)("button",{onClick:()=>p(!1),className:"p-1 text-white/70 hover:text-white",children:(0,t.jsx)(r.ChevronRight,{className:"w-6 h-6"})})]}),(0,t.jsx)("div",{className:"p-3 grid grid-cols-5 gap-2",children:_.video_list.map((e,s)=>(0,t.jsx)("button",{onClick:()=>S(s),className:`
                    aspect-square flex items-center justify-center rounded-lg text-sm font-medium transition-all
                    ${s===L?"bg-primary text-white shadow-lg shadow-primary/20":"bg-white/5 text-white/70 hover:bg-white/10 hover:text-white"}
                  `,children:s+1},e.vid))})]})]})]}):(0,t.jsxs)("main",{className:"fixed inset-0 bg-black flex flex-col items-center justify-center p-4",children:[(0,t.jsx)(o.AlertCircle,{className:"w-12 h-12 text-destructive mb-4"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Video tidak ditemukan"}),(0,t.jsx)("button",{onClick:()=>x.back(),className:"text-primary hover:underline",children:"Kembali"})]})}e.s(["default",()=>x])}]);