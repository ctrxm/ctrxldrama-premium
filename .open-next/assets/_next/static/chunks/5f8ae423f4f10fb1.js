(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72536,e=>{"use strict";var s=e.i(43476),t=e.i(57688),a=e.i(64659),r=e.i(43531),l=e.i(19374),i=e.i(71645);function o(){let{currentPlatform:e,setPlatform:o,platforms:d,getPlatformInfo:c}=(0,l.usePlatform)(),[m,u]=(0,i.useState)(!1),x=(0,i.useRef)(null),g=c(e);return(0,i.useEffect)(()=>{function e(e){x.current&&!x.current.contains(e.target)&&u(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,s.jsxs)("div",{className:"w-full py-5 px-4 sm:px-6",children:[(0,s.jsxs)("div",{className:"block lg:hidden",ref:x,children:[(0,s.jsxs)("button",{onClick:()=>u(!m),className:"w-full flex items-center justify-between gap-3 px-4 py-3.5 rounded-lg bg-card border border-border hover:border-primary/50 transition-all",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"relative w-8 h-8 rounded-md overflow-hidden border border-border",children:(0,s.jsx)(t.default,{src:g.logo,alt:g.name,fill:!0,className:"object-cover",sizes:"32px"})}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("span",{className:"font-semibold text-foreground block text-sm",children:g.name}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Current Platform"})]})]}),(0,s.jsx)(a.ChevronDown,{className:`w-5 h-5 text-muted-foreground transition-transform ${m?"rotate-180":""}`})]}),m&&(0,s.jsx)("div",{className:"absolute left-4 right-4 mt-2 bg-card rounded-lg shadow-xl border border-border overflow-hidden z-50",children:d.map((a,l)=>(0,s.jsxs)("button",{onClick:()=>{o(a.id),u(!1)},className:`
                  w-full flex items-center gap-3 px-4 py-3.5 transition-all
                  ${e===a.id?"bg-primary/10 text-primary":"hover:bg-secondary"}
                  ${0!==l?"border-t border-border":""}
                `,children:[(0,s.jsx)("div",{className:`
                  relative w-9 h-9 rounded-md overflow-hidden
                  ${e===a.id?"border-2 border-primary":"border border-border"}
                `,children:(0,s.jsx)(t.default,{src:a.logo,alt:a.name,fill:!0,className:"object-cover",sizes:"36px"})}),(0,s.jsx)("span",{className:"font-semibold flex-1 text-left text-sm",children:a.name}),e===a.id&&(0,s.jsx)(r.Check,{className:"w-5 h-5 text-primary"})]},a.id))})]}),(0,s.jsx)("div",{className:"hidden lg:block",children:(0,s.jsx)("div",{className:"flex items-center gap-2.5 overflow-x-auto no-scrollbar pb-1",children:d.map(t=>(0,s.jsx)(n,{platform:t,isActive:e===t.id,onClick:()=>o(t.id)},t.id))})})]})}function n({platform:e,isActive:a,onClick:l}){return(0,s.jsxs)("button",{onClick:l,className:`platform-tab ${a?"active":""}`,children:[(0,s.jsx)("div",{className:`
        w-7 h-7 rounded-md overflow-hidden transition-all
        ${a?"border-2 border-white/30":"border border-border"}
      `,children:(0,s.jsx)(t.default,{src:e.logo,alt:e.name,width:28,height:28,className:"object-cover"})}),(0,s.jsx)("span",{className:"font-semibold text-sm",children:e.name}),a&&(0,s.jsx)(r.Check,{className:"w-4 h-4"})]})}var d=e.i(22016),c=e.i(31343),m=e.i(83086);function u({title:e,cover:t,link:a,episodes:r=0,topLeftBadge:l,topRightBadge:i,index:o=0}){let n="px-2.5 py-1 rounded-md font-bold text-white shadow-sm leading-none tracking-wide flex items-center gap-1 font-sans text-[10px] uppercase";return(0,s.jsxs)(d.default,{href:a,className:"group relative block",children:[(0,s.jsxs)("div",{className:"card-corporate aspect-[2/3] relative overflow-hidden",children:[(0,s.jsx)("img",{src:t.includes(".heic")?`https://wsrv.nl/?url=${encodeURIComponent(t)}&output=jpg`:t,alt:e,className:"w-full h-full object-cover transition-all duration-300 group-hover:scale-105",loading:"lazy",referrerPolicy:"no-referrer"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),(0,s.jsxs)("div",{className:"absolute top-2 left-2 right-2 flex justify-between items-start pointer-events-none z-10 gap-2",children:[(0,s.jsx)("div",{className:"flex-1 min-w-0 flex justify-start",children:l&&(0,s.jsxs)("div",{className:`
                  ${n} truncate max-w-full
                  ${l.isPremium?"badge-premium":""}
                `,style:l.isPremium?{}:{backgroundColor:l.color||"#DC2626",color:l.textColor||"#FFFFFF"},children:[l.isPremium&&(0,s.jsx)(m.Sparkles,{className:"w-3 h-3 fill-current"}),l.text]})}),(0,s.jsx)("div",{className:"shrink-0 flex justify-end",children:i&&(0,s.jsx)("div",{className:`${n}`,style:{backgroundColor:i.isTransparent?"rgba(0, 0, 0, 0.6)":i.color||"rgba(0, 0, 0, 0.6)",color:i.textColor||"#FFFFFF"},children:i.text})})]}),r>0&&(0,s.jsxs)("div",{className:"absolute bottom-2 left-2 episode-badge pointer-events-none",children:[(0,s.jsx)(c.Play,{className:"w-3.5 h-3.5 fill-primary text-primary"}),(0,s.jsxs)("span",{className:"font-semibold",children:[r," Episodes"]})]}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-200",children:(0,s.jsx)("div",{className:"w-14 h-14 rounded-full bg-primary flex items-center justify-center shadow-lg",children:(0,s.jsx)(c.Play,{className:"w-6 h-6 text-white fill-white ml-0.5"})})})]}),(0,s.jsx)("div",{className:"pt-3 pb-1",children:(0,s.jsx)("h3",{className:"font-bold text-sm leading-snug line-clamp-2 text-foreground group-hover:text-primary transition-colors",children:e})})]})}function x({index:e=0}){return(0,s.jsxs)("div",{className:"rounded-2xl overflow-hidden animate-fade-up w-full",style:{animationDelay:`${50*e}ms`},children:[(0,s.jsx)("div",{className:"aspect-[2/3] bg-muted/50 relative overflow-hidden rounded-2xl",children:(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-muted/30 to-transparent animate-shimmer",style:{backgroundSize:"200% 100%"}})}),(0,s.jsxs)("div",{className:"pt-3 pb-1 space-y-2",children:[(0,s.jsx)("div",{className:"h-3 bg-muted/50 rounded-lg w-full"}),(0,s.jsx)("div",{className:"h-3 bg-muted/50 rounded-lg w-2/3"})]})]})}var g=e.i(42929);function h({title:e,dramas:t,isLoading:a,error:r,onRetry:l}){return r?(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"font-display font-bold text-xl md:text-2xl text-foreground mb-4",children:e}),(0,s.jsx)(g.UnifiedErrorDisplay,{title:`Gagal Memuat ${e}`,message:"Tidak dapat mengambil data drama.",onRetry:l})]}):a?(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"h-7 md:h-8 w-48 bg-white/10 rounded-lg animate-pulse mb-4"}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:Array.from({length:12}).map((e,t)=>(0,s.jsx)(x,{},t))})]}):(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"font-display font-bold text-xl md:text-2xl text-foreground mb-4",children:e}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:t?.slice(0,16).map((e,t)=>{let a=e.corner?.name?.toLowerCase().includes("populer")?"#E52E2E":e.corner?.color||"#e5a00d";return(0,s.jsx)(u,{index:t,title:e.bookName,cover:e.coverWap||e.cover||"",link:`/detail/dramabox/${e.bookId}`,episodes:e.chapterCount,topLeftBadge:e.corner?{text:e.corner.name,color:a}:null,topRightBadge:e.rankVo?{text:e.rankVo.hotCode,isTransparent:!0}:null},e.bookId||`drama-${t}`)})})]})}var p=e.i(59837),f=e.i(54388),b=e.i(73375),j=e.i(63059);function v({banners:e,autoPlayInterval:t=5e3}){let[a,r]=(0,i.useState)(0),[l,o]=(0,i.useState)(!1),n=(0,i.useCallback)(()=>{r(s=>(s+1)%e.length)},[e.length]),m=(0,i.useCallback)(()=>{r(s=>(s-1+e.length)%e.length)},[e.length]);if((0,i.useEffect)(()=>{if(l||e.length<=1)return;let s=setInterval(n,t);return()=>clearInterval(s)},[l,n,t,e.length]),0===e.length)return null;let u=e[a];return(0,s.jsxs)("div",{className:"relative w-full aspect-[3/1] md:aspect-[4/1] rounded-2xl overflow-hidden group",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[(0,s.jsxs)(d.default,{href:`/detail/reelshort/${u.jump_param.book_id}`,children:[(0,s.jsx)("img",{src:u.pic,alt:u.jump_param.book_title,className:"w-full h-full object-cover transition-transform duration-700"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-background/90 via-background/40 to-transparent"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-background/80 via-transparent to-transparent"}),(0,s.jsxs)("div",{className:"absolute bottom-6 left-6 right-20 space-y-3",children:[u.pic_artistic_word&&(0,s.jsx)("img",{src:u.pic_artistic_word,alt:"",className:"h-12 md:h-16 object-contain"}),(0,s.jsx)("h3",{className:"text-lg md:text-xl font-bold text-white line-clamp-1",children:u.jump_param.book_title}),u.jump_param.book_theme&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:u.jump_param.book_theme.slice(0,3).map(e=>(0,s.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs bg-white/20 text-white backdrop-blur-sm",children:e},e))}),1===u.play_button&&(0,s.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 rounded-full bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 transition-colors",children:[(0,s.jsx)(c.Play,{className:"w-4 h-4 fill-current"}),"Tonton"]})]}),u.book_mark?.text&&(0,s.jsx)("div",{className:"absolute top-4 left-4 px-3 py-1 rounded-md text-xs font-bold",style:{backgroundColor:u.book_mark.color||"#E52E2E",color:u.book_mark.text_color||"#FFFFFF"},children:u.book_mark.text})]}),e.length>1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:e=>{e.preventDefault(),m()},className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-background/80 backdrop-blur-sm opacity-0 group-hover:opacity-100 transition-opacity hover:bg-background",children:(0,s.jsx)(b.ChevronLeft,{className:"w-5 h-5"})}),(0,s.jsx)("button",{onClick:e=>{e.preventDefault(),n()},className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-background/80 backdrop-blur-sm opacity-0 group-hover:opacity-100 transition-opacity hover:bg-background",children:(0,s.jsx)(j.ChevronRight,{className:"w-5 h-5"})})]}),e.length>1&&(0,s.jsx)("div",{className:"absolute bottom-4 right-4 flex items-center gap-1.5",children:e.slice(0,10).map((e,t)=>(0,s.jsx)("button",{onClick:e=>{e.preventDefault(),r(t)},className:`
                w-2 h-2 rounded-full transition-all duration-200
                ${t===a?"bg-primary w-6":"bg-white/50 hover:bg-white/80"}
              `},t))})]})}function y(){let{data:e,isLoading:t,error:a,refetch:r}=(0,f.useReelShortHomepage)(),l=(0,i.useMemo)(()=>{if(!e?.data?.lists)return{banners:[],bookGroups:[]};let s=e.data.tab_list||[],t=s.find(e=>"POPULER"===e.tab_name)||s[0];if(!t)return{banners:[],bookGroups:[]};let a=e.data.lists.filter(e=>e.tab_id===t.tab_id),r=[],l=[];return a.forEach((e,s)=>{if(e.banners&&e.banners.length>0&&r.push(...e.banners),e.books&&e.books.length>0){let t=["Populer","Terbaru","Trending","Untuk Kamu"][s]||`Section ${s+1}`;l.push({title:t,books:e.books})}}),{banners:r,bookGroups:l}},[e]);if(a)return(0,s.jsx)(g.UnifiedErrorDisplay,{title:"Gagal Memuat ReelShort",message:"Terjadi kesalahan saat mengambil data dari server.",onRetry:()=>r()});if(t)return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)("div",{className:"aspect-[21/9] rounded-2xl bg-muted/50 animate-pulse"}),Array.from({length:3}).map((e,t)=>(0,s.jsx)(N,{},t))]});let{banners:o,bookGroups:n}=l;return(0,s.jsxs)("div",{className:"space-y-8",children:[o.length>0&&(0,s.jsx)(v,{banners:o}),n.map((e,t)=>(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"font-display font-bold text-xl md:text-2xl text-foreground mb-4",children:e.title}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:e.books.filter(e=>e.book_id&&e.book_pic).slice(0,16).map((e,t)=>(0,s.jsx)(u,{index:t,title:e.book_title,cover:e.book_pic,link:`/detail/reelshort/${e.book_id}`,episodes:e.chapter_count,topLeftBadge:e.book_mark?.text?{text:e.book_mark.text,color:e.book_mark.color||"#E52E2E",textColor:e.book_mark.text_color}:null,topRightBadge:e.rank_level?{text:e.rank_level,isTransparent:!0}:null},e.book_id))})]},t))]})}function N(){return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-6 w-32 bg-muted/50 rounded animate-pulse mb-4"}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:Array.from({length:8}).map((e,t)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"aspect-[2/3] rounded-lg bg-muted/50 animate-pulse"}),(0,s.jsx)("div",{className:"mt-1.5 h-3 bg-muted/50 rounded animate-pulse"})]},t))})]})}var w=e.i(29157);function k(e){return e.replace(/[\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]|[\u{1F600}-\u{1F64F}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{1F550}-\u{1F567}]|[\u{231A}-\u{231B}]|[\u{23E9}-\u{23F3}]|[\u{23F8}-\u{23FA}]|[\u{25AA}-\u{25AB}]|[\u{25B6}]|[\u{25C0}]|[\u{25FB}-\u{25FE}]|[\u{2614}-\u{2615}]|[\u{2648}-\u{2653}]|[\u{267F}]|[\u{2693}]|[\u{26A1}]|[\u{26AA}-\u{26AB}]|[\u{26BD}-\u{26BE}]|[\u{26C4}-\u{26C5}]|[\u{26CE}]|[\u{26D4}]|[\u{26EA}]|[\u{26F2}-\u{26F3}]|[\u{26F5}]|[\u{26FA}]|[\u{26FD}]|[\u{2702}]|[\u{2705}]|[\u{2708}-\u{270D}]|[\u{270F}]|[\u{2712}]|[\u{2714}]|[\u{2716}]|[\u{271D}]|[\u{2721}]|[\u{2728}]|[\u{2733}-\u{2734}]|[\u{2744}]|[\u{2747}]|[\u{274C}]|[\u{274E}]|[\u{2753}-\u{2755}]|[\u{2757}]|[\u{2763}-\u{2764}]|[\u{2795}-\u{2797}]|[\u{27A1}]|[\u{27B0}]|[\u{27BF}]|[\u{2934}-\u{2935}]|[\u{2B05}-\u{2B07}]|[\u{2B1B}-\u{2B1C}]|[\u{2B50}]|[\u{2B55}]|[\u{3030}]|[\u{303D}]|[\u{3297}]|[\u{3299}]|[\u{FE0F}]/gu,"").trim()}let _=["segera tayang","coming soon","upcoming"];function F(){let{data:e,isLoading:t,error:a,refetch:r}=(0,w.useNetShortTheaters)(),{data:l,isLoading:i,error:o,refetch:n}=(0,w.useNetShortForYou)();if(t||i)return(0,s.jsx)("div",{className:"space-y-10",children:Array.from({length:3}).map((e,t)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-7 w-48 bg-muted/50 rounded animate-pulse mb-4"}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:Array.from({length:12}).map((e,t)=>(0,s.jsx)(x,{index:t},t))})]},t))});if(a||o)return(0,s.jsx)(g.UnifiedErrorDisplay,{title:"Gagal Memuat NetShort",message:"Tidak dapat terhubung ke layanan NetShort.",onRetry:()=>{r(),n()}});let d=(e?.data||[]).filter(e=>{let s=k(e.groupName).toLowerCase();return!_.some(e=>s.includes(e))});return(0,s.jsxs)("div",{className:"space-y-10",children:[l?.data&&l.data.length>0&&(0,s.jsxs)("section",{children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsx)("h2",{className:"text-xl font-bold font-display text-foreground",children:"Rekomendasi Untukmu"})}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:l.data.map((e,t)=>(0,s.jsx)(u,{index:t,title:e.title,cover:e.cover,link:`/detail/netshort/${e.shortPlayId}`,episodes:e.totalEpisodes,topLeftBadge:e.scriptName?{text:e.scriptName,color:"#E52E2E"}:null,topRightBadge:e.heatScore?{text:e.heatScore,isTransparent:!0}:null},e.shortPlayId))})]}),d.map(e=>(0,s.jsxs)("section",{children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsx)("h2",{className:"text-xl font-bold font-display text-foreground",children:k(e.groupName)})}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:e.dramas.slice(0,12).map((e,t)=>(0,s.jsx)(u,{index:t,title:e.title,cover:e.cover,link:`/detail/netshort/${e.shortPlayId}`,episodes:e.totalEpisodes,topLeftBadge:e.scriptName?{text:e.scriptName,color:"#E52E2E"}:null,topRightBadge:e.heatScore?{text:e.heatScore,isTransparent:!0}:null},e.shortPlayId))})]},e.groupId))]})}var $=e.i(84360);function E(){return(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"h-8 w-48 bg-muted/50 rounded animate-pulse"}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:Array.from({length:8}).map((e,t)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"aspect-[3/4] rounded-xl bg-muted/30 animate-pulse mb-2"}),(0,s.jsx)("div",{className:"h-4 w-3/4 bg-muted/30 rounded animate-pulse"})]},t))})]})}function C(){let{data:e,isLoading:t,error:a}=(0,$.useMeloloLatest)(),{data:r,isLoading:l,error:i}=(0,$.useMeloloTrending)();return a||i?(0,s.jsx)(g.UnifiedErrorDisplay,{onRetry:()=>window.location.reload()}):t||l?(0,s.jsxs)("div",{className:"space-y-8 animate-fade-in",children:[(0,s.jsx)(E,{}),(0,s.jsx)(E,{})]}):(0,s.jsxs)("div",{className:"space-y-8 animate-fade-in pb-12",children:[r?.books&&r.books.length>0&&(0,s.jsxs)("section",{children:[(0,s.jsx)("div",{className:"mb-4 flex items-center justify-between",children:(0,s.jsx)("h2",{className:"font-display font-bold text-xl md:text-2xl text-foreground",children:"Sedang Hangat"})}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:r.books.map((e,t)=>(0,s.jsx)(u,{title:e.book_name,cover:e.thumb_url,link:`/detail/melolo/${e.book_id}`,episodes:e.serial_count||0,topLeftBadge:null,index:t},e.book_id))})]}),e?.books&&e.books.length>0&&(0,s.jsxs)("section",{children:[(0,s.jsx)("div",{className:"mb-4 flex items-center justify-between",children:(0,s.jsx)("h2",{className:"font-display font-bold text-xl md:text-2xl text-foreground",children:"Rilis Baru"})}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:e.books.map((e,t)=>(0,s.jsx)(u,{title:e.book_name,cover:e.thumb_url,link:`/detail/melolo/${e.book_id}`,episodes:e.serial_count||0,topLeftBadge:null,index:t},e.book_id))})]}),!t&&!l&&!e?.books?.length&&!r?.books?.length&&(0,s.jsx)("div",{className:"text-center py-20 text-muted-foreground",children:"Tidak ada konten tersedia saat ini."})]})}var D=e.i(68030);function L({count:e=6,titleWidth:t="w-48"}){return(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsx)("div",{className:`h-7 md:h-8 ${t} bg-white/10 rounded-lg animate-pulse`}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:Array.from({length:e}).map((e,t)=>(0,s.jsx)(x,{},t))})]})}function R(){let{data:e,isLoading:t,error:a,refetch:r}=(0,D.useFlickReelsForYou)(),{data:l,isLoading:i,error:o,refetch:n}=(0,D.useFlickReelsLatest)(),{data:d,isLoading:c,error:m,refetch:x}=(0,D.useFlickReelsHotRank)();return a||o||m?(0,s.jsx)(g.UnifiedErrorDisplay,{onRetry:()=>{a&&r(),o&&n(),m&&x()}}):(0,s.jsxs)("div",{className:"space-y-12 pb-20",children:[t?(0,s.jsx)(L,{count:12,titleWidth:"w-56"}):(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("h2",{className:"font-display font-bold text-xl md:text-2xl text-foreground",children:"Rekomendasi Untukmu"})}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:e?.data?.list?.filter(e=>e.title&&e.cover&&"Untitled"!==e.title).map((e,t)=>(0,s.jsx)(u,{title:e.title,cover:e.cover,link:`/detail/flickreels/${e.playlet_id}`,episodes:e.upload_num?parseInt(e.upload_num):0,topRightBadge:e.hot_num?{text:e.hot_num,isTransparent:!0}:null,topLeftBadge:"2"===e.status?{text:"Ongoing",color:"#EAB308"}:null},`${e.playlet_id}-${t}`))})]}),c?(0,s.jsx)(L,{count:6,titleWidth:"w-40"}):d?.data?.map((e,t)=>(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("h2",{className:"font-display font-bold text-xl md:text-2xl text-foreground flex items-center gap-2",children:e.name})}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:e.data?.filter(e=>e.title&&e.cover).map((e,t)=>(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(u,{title:e.title,cover:e.cover,link:`/detail/flickreels/${e.playlet_id}`,episodes:e.upload_num?parseInt(e.upload_num):0,topRightBadge:e.hot_num?{text:e.hot_num,isTransparent:!0}:null})},`${e.playlet_id}-${t}`))})]},e.name||t)),i?(0,s.jsx)(L,{count:12,titleWidth:"w-48"}):l?.data?.map((e,t)=>(0,s.jsxs)("section",{className:"space-y-4",children:[e.title&&(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("h2",{className:"font-display font-bold text-xl md:text-2xl text-foreground",children:e.title})}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:e.list?.filter(e=>e.title&&e.cover).map((e,t)=>(0,s.jsx)(u,{title:e.title,cover:e.cover,link:`/detail/flickreels/${e.playlet_id}`,episodes:e.upload_num?parseInt(e.upload_num):0,topRightBadge:null},`${e.playlet_id}-${t}`))})]},t))]})}var B=e.i(4671);function A(e){if("recommend"===e.type&&e.items&&e.items.length>0){let s=e.items[0];if(s.module_card&&s.module_card.items)return s.module_card.items}return e.items||[]}function S({count:e=6,titleWidth:t="w-48"}){return(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsx)("div",{className:`h-7 md:h-8 ${t} bg-white/10 rounded-lg animate-pulse`}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:Array.from({length:e}).map((e,t)=>(0,s.jsx)(x,{},t))})]})}function T(e){return e.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"").trim()}function P(){let{data:e,isLoading:t,error:a,refetch:r}=(0,B.useFreeReelsForYou)(),{data:l,isLoading:i,error:o,refetch:n}=(0,B.useFreeReelsHome)(),{data:d,isLoading:c,error:m,refetch:x}=(0,B.useFreeReelsAnime)();return a&&o&&m?(0,s.jsx)(g.UnifiedErrorDisplay,{onRetry:()=>{a&&r(),o&&n(),m&&x()}}):(0,s.jsxs)("div",{className:"space-y-8 pb-20",children:[t?(0,s.jsx)(S,{count:12,titleWidth:"w-56"}):(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("h2",{className:"font-display font-bold text-xl md:text-2xl text-foreground",children:"Rekomendasi Untukmu"})}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:e?.data?.items?.filter(e=>e.title&&e.cover).map((e,t)=>(0,s.jsx)(u,{title:e.title,cover:e.cover,link:`/detail/freereels/${e.key}`,episodes:e.episode_count||0,topRightBadge:e.follow_count?{text:`${(e.follow_count/1e3).toFixed(1)}k`,isTransparent:!0}:null,topLeftBadge:null},`${e.key}-foryou-${t}`))})]}),i?(0,s.jsx)(S,{count:6,titleWidth:"w-40"}):l?.data?.items?.filter(e=>"coming_soon"!==e.type).map((e,t)=>{let a=A(e);if(!a||0===a.length)return null;let r=a.filter(e=>e.title&&e.cover);if(0===r.length)return null;let l=e.module_name?T(e.module_name):"";return(0,s.jsxs)("section",{className:"space-y-4",children:[l&&(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("h2",{className:"font-display font-bold text-xl md:text-2xl text-foreground",children:l})}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:r.map((e,a)=>(0,s.jsx)(u,{title:e.title,cover:e.cover,link:`/detail/freereels/${e.key}`,episodes:e.episode_count||0,topRightBadge:e.follow_count?{text:`${(e.follow_count/1e3).toFixed(1)}k`,isTransparent:!0}:null},`${e.key}-home-${t}-${a}`))})]},`home-module-${t}`)}),c?(0,s.jsx)(S,{count:6,titleWidth:"w-40"}):d?.data?.items&&d.data.items.length>0&&(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("h2",{className:"font-display font-bold text-xl md:text-2xl text-foreground",children:"Anime"})}),(0,s.jsx)("div",{className:"space-y-8",children:d.data.items.map((e,t)=>{let a=A(e);if(!a||0===a.length)return null;let r=a.filter(e=>e.title&&e.cover);return 0===r.length?null:(0,s.jsxs)("div",{className:"space-y-4",children:[e.module_name&&""!==T(e.module_name)&&(0,s.jsx)("h3",{className:"font-display font-semibold text-lg text-foreground/90",children:T(e.module_name)}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:r.map((e,a)=>(0,s.jsx)(u,{title:e.title,cover:e.cover,link:`/detail/freereels/${e.key}`,episodes:e.episode_count||0,topRightBadge:e.follow_count?{text:`${(e.follow_count/1e3).toFixed(1)}k`,isTransparent:!0}:null},`${e.key}-anime-${t}-${a}`))})]},`anime-module-${t}`)})})]})]})}var I=e.i(70273);function U(){return(0,s.jsx)("div",{className:"animate-pulse",children:(0,s.jsx)("div",{className:"relative aspect-[21/9] bg-gray-200 dark:bg-gray-700 rounded-xl"})})}function M(){return(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"relative aspect-video bg-gray-200 dark:bg-gray-700 rounded-lg mb-3"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),(0,s.jsx)("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded w-full"})]})}function W({dramas:e,isLoading:a}){let[r,l]=(0,i.useState)(0),[o,n]=(0,i.useState)(!0);if((0,i.useEffect)(()=>{let s=e.filter(e=>{let s=e.cover||e.cover_url||e.thumb_url;return s&&s.startsWith("http")});if(!o||0===s.length)return;let t=setInterval(()=>{l(e=>(e+1)%s.length)},5e3);return()=>clearInterval(t)},[o,e]),a)return(0,s.jsx)(U,{});let m=e.filter(e=>{let s=e.cover||e.cover_url||e.thumb_url;return s&&s.startsWith("http")});if(!m||0===m.length)return null;let u=m[r%m.length];return(0,s.jsxs)("div",{className:"relative w-full aspect-[21/9] rounded-xl overflow-hidden group",children:[(0,s.jsxs)("div",{className:"absolute inset-0",children:[(0,s.jsx)(t.default,{src:u.cover||u.cover_url||u.thumb_url,alt:u.bookName||u.name||u.book_name,fill:!0,className:"object-cover transition-transform duration-700 group-hover:scale-105",unoptimized:!0,priority:!0}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 via-black/50 to-transparent"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"})]}),(0,s.jsx)("div",{className:"relative h-full flex flex-col justify-end p-8 md:p-12",children:(0,s.jsxs)("div",{className:"max-w-2xl space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"px-3 py-1 bg-primary/90 text-primary-foreground text-xs font-bold rounded-full backdrop-blur-sm",children:"â­ FEATURED"}),u.rating&&(0,s.jsxs)("div",{className:"flex items-center gap-1 px-3 py-1 bg-black/50 backdrop-blur-sm rounded-full",children:[(0,s.jsx)(I.Star,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"}),(0,s.jsx)("span",{className:"text-xs font-semibold text-white",children:u.rating})]})]}),(0,s.jsx)("h1",{className:"text-3xl md:text-5xl font-bold text-white drop-shadow-lg line-clamp-2",children:u.bookName||u.name||u.book_name}),(0,s.jsx)("p",{className:"text-sm md:text-base text-gray-200 line-clamp-2 md:line-clamp-3 drop-shadow-md",children:u.introduction||"No description available"}),u.tagNames&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:u.tagNames.slice(0,3).map(e=>(0,s.jsx)("span",{className:"px-3 py-1 bg-white/20 backdrop-blur-sm text-white text-xs font-medium rounded-full",children:e},e))}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 pt-2",children:[(0,s.jsxs)(d.default,{href:`/detail/${u.platform||"dramabox"}/${u.bookId||u.book_id||u.short_play_id}`,className:"px-6 py-3 bg-primary hover:bg-primary/90 text-primary-foreground rounded-lg font-semibold flex items-center gap-2 transition-all hover:scale-105 shadow-lg",children:[(0,s.jsx)(c.Play,{className:"w-5 h-5 fill-current"}),"Watch Now"]}),(0,s.jsx)("button",{className:"px-6 py-3 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white rounded-lg font-semibold transition-all hover:scale-105",children:"More Info"})]})]})}),(0,s.jsx)("button",{onClick:()=>{n(!1);let s=e.filter(e=>{let s=e.cover||e.cover_url||e.thumb_url;return s&&s.startsWith("http")});l(e=>(e-1+s.length)%s.length)},className:"absolute left-4 top-1/2 -translate-y-1/2 p-3 bg-black/50 hover:bg-black/70 backdrop-blur-sm rounded-full transition-all opacity-0 group-hover:opacity-100","aria-label":"Previous",children:(0,s.jsx)(b.ChevronLeft,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("button",{onClick:()=>{n(!1);let s=e.filter(e=>{let s=e.cover||e.cover_url||e.thumb_url;return s&&s.startsWith("http")});l(e=>(e+1)%s.length)},className:"absolute right-4 top-1/2 -translate-y-1/2 p-3 bg-black/50 hover:bg-black/70 backdrop-blur-sm rounded-full transition-all opacity-0 group-hover:opacity-100","aria-label":"Next",children:(0,s.jsx)(j.ChevronRight,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:m.map((e,t)=>(0,s.jsx)("button",{onClick:()=>{n(!1),l(t)},className:`h-1.5 rounded-full transition-all ${t===r?"w-8 bg-white":"w-1.5 bg-white/50 hover:bg-white/70"}`,"aria-label":`Go to slide ${t+1}`},t))})]})}var z=e.i(3116),G=e.i(7471),O=e.i(57951);function Y(){let{user:e}=(0,O.useAuth)(),[a,r]=(0,i.useState)([]),[l,o]=(0,i.useState)(!0);(0,i.useEffect)(()=>{e?n():o(!1)},[e]);let n=async()=>{try{let{data:s,error:t}=await G.supabase.from("watch_history").select("*").eq("user_id",e?.id).order("last_watched_at",{ascending:!1}).limit(6);if(t)throw t;r(s||[])}catch(e){console.error("Error fetching watch history:",e)}finally{o(!1)}};return e&&(l||0!==a.length)?(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,s.jsx)(z.Clock,{className:"w-6 h-6 text-primary"}),"Continue Watching"]})}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:l?Array.from({length:6}).map((e,t)=>(0,s.jsx)(M,{},t)):a.map(e=>(0,s.jsxs)(d.default,{href:`/detail/${e.platform}/${e.drama_id}`,className:"group relative",children:[(0,s.jsxs)("div",{className:"relative aspect-video rounded-lg overflow-hidden mb-2 bg-gray-200 dark:bg-gray-800",children:[(0,s.jsx)(t.default,{src:e.drama_cover,alt:e.drama_title,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-110",unoptimized:!0}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary flex items-center justify-center transform scale-90 group-hover:scale-100 transition-transform",children:(0,s.jsx)(c.Play,{className:"w-6 h-6 text-primary-foreground fill-current ml-0.5"})})}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gray-700/50",children:(0,s.jsx)("div",{className:"h-full bg-primary transition-all",style:{width:`${e.duration>0?e.watch_position/e.duration*100:0}%`}})})]}),(0,s.jsx)("h3",{className:"text-sm font-semibold line-clamp-1 mb-1 group-hover:text-primary transition-colors",children:e.drama_title}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Episode ",e.episode_number," â€¢ ",e.duration>0?Math.round(e.watch_position/e.duration*100):0,"%"]})]},e.id))})]}):null}var q=e.i(63671),H=e.i(31278);function V({title:e}){let{data:t,fetchNextPage:a,hasNextPage:r,isFetchingNextPage:l,isLoading:o,isError:n,refetch:d}=(0,q.useInfiniteForYouDramas)(),c=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e=new IntersectionObserver(e=>{e[0].isIntersecting&&r&&!l&&a()},{threshold:.1,rootMargin:"200px"});return c.current&&e.observe(c.current),()=>{e.disconnect()}},[r,l,a]);let m=t?.pages.flatMap(e=>e)||[];return n?(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"font-display font-bold text-xl md:text-2xl text-foreground mb-4",children:e}),(0,s.jsx)(g.UnifiedErrorDisplay,{title:`Gagal Memuat ${e}`,message:"Tidak dapat mengambil data drama.",onRetry:()=>d()})]}):o||!t?(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"h-7 md:h-8 w-48 bg-white/10 rounded-lg animate-pulse mb-4"}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:Array.from({length:16}).map((e,t)=>(0,s.jsx)(x,{},t))})]}):(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"font-display font-bold text-xl md:text-2xl text-foreground mb-4",children:e}),(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3 md:gap-4",children:m.map((e,t)=>{let a=e.corner?.name?.toLowerCase().includes("populer")?"#E52E2E":e.corner?.color||"#e5a00d";return(0,s.jsx)(u,{index:t,title:e.bookName,cover:e.coverWap||e.cover||"",link:`/detail/dramabox/${e.bookId}`,episodes:e.chapterCount,topLeftBadge:e.corner?{text:e.corner.name,color:a}:null,topRightBadge:e.rankVo?{text:e.rankVo.hotCode,isTransparent:!0}:null},`${e.bookId}-${t}`)})}),(0,s.jsx)("div",{ref:c,className:"py-8 flex justify-center w-full min-h-[100px]",children:l?(0,s.jsx)(H.Loader2,{className:"w-8 h-8 animate-spin text-primary"}):r?(0,s.jsx)("div",{className:"h-20 w-full"}):(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"Sudah mencapai akhir daftar"})})]})}function K({children:e,className:t="",delay:a=0}){let{ref:r,isVisible:l}=function(e=.1){let s=(0,i.useRef)(null),[t,a]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let t=new IntersectionObserver(([e])=>{e.isIntersecting&&(a(!0),t.disconnect())},{threshold:e});return s.current&&t.observe(s.current),()=>t.disconnect()},[e]),{ref:s,isVisible:t}}();return(0,s.jsx)("div",{ref:r,className:`transition-all duration-700 ${l?"opacity-100 translate-y-0":"opacity-0 translate-y-8"} ${t}`,style:{transitionDelay:`${a}ms`},children:e})}let Q=(0,e.i(75254).default)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);function J(){let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let e=()=>{window.scrollY>500?t(!0):t(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,s.jsx)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:`fixed bottom-20 md:bottom-6 right-6 z-50 p-3 rounded-full bg-primary text-primary-foreground shadow-lg hover:shadow-xl transition-all duration-300 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-16 pointer-events-none"}`,"aria-label":"Back to top",children:(0,s.jsx)(Q,{className:"w-5 h-5"})})}var X=e.i(19455),Z=e.i(68148),ee=e.i(46695),es=e.i(75157);function et({className:e,limit:a=6}){let{user:r}=(0,O.useAuth)(),{getRecentlyWatched:l}=(0,ee.useWatchHistory)(),i=l(a);return r&&0!==i.length?(0,s.jsxs)("div",{className:(0,es.cn)("space-y-4",e),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.Play,{className:"w-5 h-5 text-green-500"}),(0,s.jsx)("h2",{className:"text-xl font-bold",children:"Lanjutkan Menonton"})]}),(0,s.jsx)(d.default,{href:"/history",children:(0,s.jsxs)(X.Button,{variant:"ghost",size:"sm",className:"text-muted-foreground",children:["Lihat Semua",(0,s.jsx)(j.ChevronRight,{className:"w-4 h-4 ml-1"})]})})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:i.map(e=>{let a=e.duration>0?e.watch_position/e.duration*100:0;return(0,s.jsxs)(d.default,{href:`/drama/${e.platform}/${e.drama_id}?episode=${e.episode_number}`,className:"group relative rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"aspect-video relative",children:[e.drama_cover?(0,s.jsx)(t.default,{src:e.drama_cover,alt:e.drama_title,fill:!0,className:"object-cover"}):(0,s.jsx)("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:(0,s.jsx)(c.Play,{className:"w-8 h-8 text-muted-foreground"})}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-white/20 backdrop-blur flex items-center justify-center",children:(0,s.jsx)(c.Play,{className:"w-6 h-6 text-white fill-white"})})}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0",children:(0,s.jsx)(Z.Progress,{value:a,className:"h-1 rounded-none"})})]}),(0,s.jsxs)("div",{className:"p-2 bg-card",children:[(0,s.jsx)("p",{className:"text-sm font-medium line-clamp-1",children:e.drama_title}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Episode ",e.episode_number]})]})]},`${e.drama_id}-${e.platform}`)})})]}):null}var ea=e.i(66027),er=e.i(57306);function el({className:e,limit:a=10}){var r;let{user:l}=(0,O.useAuth)(),{data:i,isLoading:o}=(r=l?.id,(0,ea.useQuery)({queryKey:["recommendations",r],queryFn:async()=>{if(!r){let{data:e,error:s}=await G.supabase.from("drama_stats").select("*").order("avg_rating",{ascending:!1}).limit(10);if(s)throw s;return e}let{data:e}=await G.supabase.from("watch_history").select("drama_genre").eq("user_id",r).not("drama_genre","is",null).limit(10),s=[...new Set((e||[]).map(e=>e.drama_genre).filter(Boolean))];if(0===s.length){let{data:e,error:s}=await G.supabase.from("drama_stats").select("*").order("avg_rating",{ascending:!1}).limit(10);if(s)throw s;return e}let t=s.map(e=>`drama_genre.ilike.%${e}%`).join(","),{data:a,error:l}=await G.supabase.from("drama_stats").select("*").or(t).order("avg_rating",{ascending:!1}).limit(10);if(l)throw l;return a},enabled:!0})),n=i?.slice(0,a);return o?(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsx)(H.Loader2,{className:"w-6 h-6 animate-spin text-primary"})}):n?.length?(0,s.jsxs)("div",{className:(0,es.cn)("space-y-4",e),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.Sparkles,{className:"w-5 h-5 text-purple-500"}),(0,s.jsx)("h2",{className:"text-xl font-bold",children:l?"Rekomendasi Untuk Anda":"Drama Populer"})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:n.map(e=>(0,s.jsxs)("div",{className:"relative group rounded-xl overflow-hidden bg-card",children:[(0,s.jsx)(d.default,{href:`/drama/${e.platform}/${e.drama_id}`,children:(0,s.jsxs)("div",{className:"aspect-[2/3] relative",children:[e.drama_cover?(0,s.jsx)(t.default,{src:e.drama_cover,alt:e.drama_title,fill:!0,className:"object-cover transition-transform group-hover:scale-105"}):(0,s.jsx)("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:(0,s.jsx)(m.Sparkles,{className:"w-8 h-8 text-muted-foreground"})}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),(0,s.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:[(0,s.jsx)("p",{className:"text-white font-semibold line-clamp-2 mb-1",children:e.drama_title}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-white/80",children:[e.avg_rating>0&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(I.Star,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"}),e.avg_rating.toFixed(1)]}),e.drama_genre&&(0,s.jsx)("span",{className:"truncate",children:e.drama_genre})]})]})]})}),(0,s.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)(er.FavoriteButton,{drama_id:e.drama_id,platform:e.platform,drama_title:e.drama_title,drama_cover:e.drama_cover||void 0,drama_genre:e.drama_genre||void 0})})]},`${e.drama_id}-${e.platform}`))})]}):null}function ei(){let{isDramaBox:e,isReelShort:t,isNetShort:a,isMelolo:r,isFlickReels:i,isFreeReels:n}=(0,l.usePlatform)(),{data:d,isLoading:c,error:m,refetch:u}=(0,q.useForYouDramas)(),{data:x,isLoading:g,error:f,refetch:b}=(0,q.useLatestDramas)(),{data:j,isLoading:v,error:N,refetch:w}=(0,q.useTrendingDramas)(),{data:k,isLoading:_,error:$,refetch:E}=(0,q.useDubindoDramas)();return(0,s.jsxs)("main",{className:"min-h-screen pt-16",children:[(0,s.jsx)("div",{className:"glass-strong sticky top-16 z-40",children:(0,s.jsx)("div",{className:"container mx-auto",children:(0,s.jsx)(o,{})})}),e&&(0,s.jsxs)("div",{className:"container mx-auto px-4 py-6 space-y-12",children:[(0,s.jsx)(K,{children:(0,s.jsx)(W,{dramas:j?.slice(0,5)||[],isLoading:v})}),(0,s.jsx)(p.AdsDisplay,{position:"banner"}),(0,s.jsx)(K,{delay:100,children:(0,s.jsx)(et,{})}),(0,s.jsx)(K,{delay:100,children:(0,s.jsx)(Y,{})}),(0,s.jsx)(K,{delay:200,children:(0,s.jsx)(h,{title:"ðŸ”¥ Trending Now",dramas:j,isLoading:v,error:!!N,onRetry:()=>w()})}),(0,s.jsx)(K,{delay:300,children:(0,s.jsx)(h,{title:"Populer",dramas:d,isLoading:c,error:!!m,onRetry:()=>u()})}),(0,s.jsx)(p.AdsDisplay,{position:"inline"}),(0,s.jsx)(K,{delay:100,children:(0,s.jsx)(h,{title:"Terbaru",dramas:x,isLoading:g,error:!!f,onRetry:()=>b()})}),(0,s.jsx)(K,{delay:200,children:(0,s.jsx)(h,{title:"Dubindo",dramas:k,isLoading:_,error:!!$,onRetry:()=>E()})}),(0,s.jsx)(K,{delay:300,children:(0,s.jsx)(el,{limit:10})}),(0,s.jsx)(K,{delay:400,children:(0,s.jsx)(V,{title:"Lainnya"})})]}),t&&(0,s.jsxs)("div",{className:"container mx-auto px-4 py-6 space-y-8",children:[(0,s.jsx)(p.AdsDisplay,{position:"banner"}),(0,s.jsx)(K,{children:(0,s.jsx)(y,{})})]}),a&&(0,s.jsxs)("div",{className:"container mx-auto px-4 py-6 space-y-8",children:[(0,s.jsx)(p.AdsDisplay,{position:"banner"}),(0,s.jsx)(K,{children:(0,s.jsx)(F,{})})]}),r&&(0,s.jsxs)("div",{className:"container mx-auto px-4 py-6 space-y-8",children:[(0,s.jsx)(p.AdsDisplay,{position:"banner"}),(0,s.jsx)(K,{children:(0,s.jsx)(C,{})})]}),i&&(0,s.jsxs)("div",{className:"container mx-auto px-4 py-6 space-y-8",children:[(0,s.jsx)(p.AdsDisplay,{position:"banner"}),(0,s.jsx)(K,{children:(0,s.jsx)(R,{})})]}),n&&(0,s.jsxs)("div",{className:"container mx-auto px-4 py-6 space-y-8",children:[(0,s.jsx)(p.AdsDisplay,{position:"banner"}),(0,s.jsx)(K,{children:(0,s.jsx)(P,{})})]}),(0,s.jsx)(J,{})]})}e.s(["default",()=>ei],72536)}]);