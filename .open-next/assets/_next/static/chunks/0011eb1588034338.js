(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27612,e=>{"use strict";let a=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>a],27612)},2747,e=>{"use strict";var a=e.i(43476),s=e.i(75157);function t({className:e,...t}){return(0,a.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",e),...t})}e.s(["Skeleton",()=>t])},73375,e=>{"use strict";let a=(0,e.i(75254).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>a],73375)},63059,e=>{"use strict";let a=(0,e.i(75254).default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>a],63059)},31278,e=>{"use strict";let a=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],31278)},63209,e=>{"use strict";let a=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>a],63209)},43531,e=>{"use strict";let a=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>a],43531)},42929,e=>{"use strict";var a=e.i(43476),s=e.i(63209);let t=(0,e.i(75254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function r({message:e="Terjadi kesalahan saat memuat data.",title:r="Gagal Memuat",onRetry:i,retryLabel:l="Coba Lagi"}){return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 md:p-12 text-center space-y-6 bg-[#1a1625] rounded-2xl border border-white/5 mx-auto max-w-4xl w-full",children:[(0,a.jsx)("div",{className:"rounded-full bg-red-500/10 p-4 ring-1 ring-red-500/20",children:(0,a.jsx)(s.AlertCircle,{className:"w-8 h-8 text-red-500"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"font-display font-bold text-lg md:text-xl text-white",children:r}),(0,a.jsx)("p",{className:"text-sm text-white/60 max-w-sm mx-auto",children:e})]}),i&&(0,a.jsxs)("button",{onClick:i,className:"flex items-center gap-2 px-6 py-2.5 rounded-full bg-[#3D2942] text-purple-300 text-sm font-medium hover:bg-[#4D3453] transition-colors hover:text-purple-200",children:[(0,a.jsx)(t,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:l})]})]})}e.s(["UnifiedErrorDisplay",()=>r],42929)},57306,e=>{"use strict";var a=e.i(43476),s=e.i(90597),t=e.i(19455),r=e.i(26691),i=e.i(57951),l=e.i(75157),o=e.i(46696);function d({drama_id:e,platform:d,drama_title:n,drama_cover:c,drama_genre:m,variant:u="icon",className:x}){let{user:h}=(0,i.useAuth)(),{isFavorite:f,toggleFavorite:p,isToggling:b}=(0,r.useFavorites)(),g=f(e,d),v=async a=>{if(a.preventDefault(),a.stopPropagation(),!h)return void o.toast.error("Silakan login terlebih dahulu");try{await p({drama_id:e,platform:d,drama_title:n,drama_cover:c,drama_genre:m}),o.toast.success(g?"Dihapus dari favorit":"Ditambahkan ke favorit")}catch{o.toast.error("Gagal memperbarui favorit")}};return"icon"===u?(0,a.jsx)("button",{onClick:v,disabled:b,className:(0,l.cn)("p-2 rounded-full bg-black/50 hover:bg-black/70 transition-colors",x),children:(0,a.jsx)(s.Heart,{className:(0,l.cn)("w-5 h-5 transition-colors",g?"fill-red-500 text-red-500":"text-white")})}):(0,a.jsxs)(t.Button,{onClick:v,disabled:b,variant:g?"default":"outline",className:x,children:[(0,a.jsx)(s.Heart,{className:(0,l.cn)("w-4 h-4 mr-2",g&&"fill-current")}),g?"Hapus dari Favorit":"Tambah ke Favorit"]})}e.s(["FavoriteButton",()=>d])},70273,e=>{"use strict";let a=(0,e.i(75254).default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>a],70273)},26691,e=>{"use strict";var a=e.i(66027),s=e.i(54616),t=e.i(12598),r=e.i(7471),i=e.i(57951);function l(){let{user:e}=(0,i.useAuth)(),l=(0,t.useQueryClient)(),o=(0,a.useQuery)({queryKey:["favorites",e?.id],queryFn:async()=>{if(!e)return[];let{data:a,error:s}=await r.supabase.from("favorites").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(s)throw s;return a},enabled:!!e}),d=(0,s.useMutation)({mutationFn:async a=>{if(!e)throw Error("Must be logged in");let{error:s}=await r.supabase.from("favorites").insert({user_id:e.id,...a});if(s)throw s},onSuccess:()=>{l.invalidateQueries({queryKey:["favorites",e?.id]})}}),n=(0,s.useMutation)({mutationFn:async a=>{if(!e)throw Error("Must be logged in");let{error:s}=await r.supabase.from("favorites").delete().eq("user_id",e.id).eq("drama_id",a.drama_id).eq("platform",a.platform);if(s)throw s},onSuccess:()=>{l.invalidateQueries({queryKey:["favorites",e?.id]})}}),c=(e,a)=>o.data?.some(s=>s.drama_id===e&&s.platform===a)??!1,m=async e=>{c(e.drama_id,e.platform)?await n.mutateAsync({drama_id:e.drama_id,platform:e.platform}):await d.mutateAsync(e)};return{favorites:o.data??[],isLoading:o.isLoading,isFavorite:c,toggleFavorite:m,addFavorite:d.mutate,removeFavorite:n.mutate,isToggling:d.isPending||n.isPending}}e.s(["useFavorites",()=>l])},87316,e=>{"use strict";let a=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>a],87316)},20879,e=>{"use strict";var a=e.i(66027),s=e.i(73652);let t="/api/dramabox";async function r(e){return(0,s.fetchJson)(`${t}/detail/${e}`)}async function i(e){return(0,s.fetchJson)(`${t}/allepisode/${e}`)}function l(e){return(0,a.useQuery)({queryKey:["drama","detail",e],queryFn:()=>r(e),enabled:!!e,staleTime:3e5})}function o(e){return(0,a.useQuery)({queryKey:["drama","episodes",e],queryFn:()=>i(e),enabled:!!e,staleTime:3e5})}e.s(["useDramaDetail",()=>l,"useEpisodes",()=>o])},98405,e=>{"use strict";var a=e.i(43476),s=e.i(42929),t=e.i(20879),r=e.i(31343),i=e.i(87316),l=e.i(73375),o=e.i(2747),d=e.i(77572),n=e.i(22016),c=e.i(18566),m=e.i(57306),u=e.i(105),x=e.i(89143),h=e.i(57974),f=e.i(81464),p=e.i(26120);function b(){let e=(0,c.useParams)().bookId,o=(0,c.useRouter)(),{data:b,isLoading:v,error:y}=(0,t.useDramaDetail)(e||"");if(v)return(0,a.jsx)(g,{});let k=null;return null!==b&&"object"==typeof b&&"bookId"in b&&"coverWap"in b?k={bookId:b.bookId,bookName:b.bookName,cover:b.coverWap,chapterCount:b.chapterCount,introduction:b.introduction,tags:b.tags||b.tagV3s?.map(e=>e.tagName),shelfTime:b.shelfTime}:null!==b&&"object"==typeof b&&"data"in b&&b.data?.book!==void 0&&(k={bookId:b.data.book.bookId,bookName:b.data.book.bookName,cover:b.data.book.cover,chapterCount:b.data.book.chapterCount,introduction:b.data.book.introduction,tags:b.data.book.tags,shelfTime:b.data.book.shelfTime}),y||!k?(0,a.jsx)("div",{className:"min-h-screen pt-24 px-4",children:(0,a.jsx)(s.UnifiedErrorDisplay,{title:"Drama tidak ditemukan",message:"Tidak dapat memuat detail drama. Silakan coba lagi atau kembali ke beranda.",onRetry:()=>o.push("/"),retryLabel:"Kembali ke Beranda"})}):(0,a.jsxs)("main",{className:"min-h-screen pt-20",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,a.jsx)("img",{src:k.cover,alt:"",className:"w-full h-full object-cover opacity-20 blur-3xl scale-110"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-background/50 via-background/80 to-background"})]}),(0,a.jsxs)("div",{className:"relative max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsxs)("button",{onClick:()=>o.back(),className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors mb-6",children:[(0,a.jsx)(l.ChevronLeft,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Kembali"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-8",children:[(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("img",{src:k.cover,alt:k.bookName,className:"w-full max-w-[300px] mx-auto rounded-2xl shadow-2xl"}),(0,a.jsx)("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-t from-background/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end justify-center pb-6",children:(0,a.jsxs)(n.default,{href:`/watch/dramabox/${k.bookId}`,className:"px-8 py-3 rounded-full bg-primary text-primary-foreground font-semibold flex items-center gap-2 hover:scale-105 transition-transform shadow-lg",children:[(0,a.jsx)(r.Play,{className:"w-5 h-5 fill-current"}),"Tonton Sekarang"]})}),(0,a.jsxs)("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[(0,a.jsx)(m.FavoriteButton,{drama_id:k.bookId,platform:"dramabox",drama_title:k.bookName,drama_cover:k.cover,drama_genre:k.tags?.[0]}),(0,a.jsx)(u.ShareButton,{title:k.bookName,description:k.introduction?.slice(0,100)}),(0,a.jsx)(x.SubscribeButton,{drama_id:k.bookId,platform:"dramabox",drama_title:k.bookName})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold font-display gradient-text mb-4",children:k.bookName}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(r.Play,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[k.chapterCount," Episode"]})]}),k.shelfTime&&(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(i.Calendar,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:k.shelfTime?.split(" ")[0]})]})]})]}),k.tags&&k.tags.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:k.tags.map(e=>(0,a.jsx)("span",{className:"tag-pill",children:e},e))}),(0,a.jsxs)("div",{className:"glass rounded-xl p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-foreground mb-2",children:"Sinopsis"}),(0,a.jsx)("p",{className:"text-muted-foreground leading-relaxed",children:k.introduction})]}),(0,a.jsxs)("div",{className:"glass rounded-xl p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-foreground mb-3",children:"Beri Rating"}),(0,a.jsx)(h.RatingStars,{drama_id:k.bookId,platform:"dramabox",showReview:!0,size:"lg"})]}),(0,a.jsxs)(n.default,{href:`/watch/dramabox/${k.bookId}`,className:"inline-flex items-center gap-2 px-8 py-3 rounded-full font-semibold text-primary-foreground transition-all hover:scale-105 shadow-lg",style:{background:"var(--gradient-primary)"},children:[(0,a.jsx)(r.Play,{className:"w-5 h-5 fill-current"}),"Mulai Menonton"]})]})]})]})]}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,a.jsxs)(d.Tabs,{defaultValue:"reviews",className:"w-full",children:[(0,a.jsxs)(d.TabsList,{className:"mb-4",children:[(0,a.jsx)(d.TabsTrigger,{value:"reviews",children:"Ulasan"}),(0,a.jsx)(d.TabsTrigger,{value:"comments",children:"Komentar"})]}),(0,a.jsx)(d.TabsContent,{value:"reviews",children:(0,a.jsx)(p.ReviewsList,{drama_id:k.bookId,platform:"dramabox"})}),(0,a.jsx)(d.TabsContent,{value:"comments",children:(0,a.jsx)(f.CommentsSection,{drama_id:k.bookId,platform:"dramabox"})})]})})]})}function g(){return(0,a.jsx)("main",{className:"min-h-screen pt-24 px-4",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-8",children:[(0,a.jsx)(o.Skeleton,{className:"aspect-[2/3] w-full max-w-[300px] rounded-2xl"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(o.Skeleton,{className:"h-10 w-3/4"}),(0,a.jsx)(o.Skeleton,{className:"h-6 w-1/2"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(o.Skeleton,{className:"h-8 w-20 rounded-full"}),(0,a.jsx)(o.Skeleton,{className:"h-8 w-20 rounded-full"}),(0,a.jsx)(o.Skeleton,{className:"h-8 w-20 rounded-full"})]}),(0,a.jsx)(o.Skeleton,{className:"h-32 w-full rounded-xl"}),(0,a.jsx)(o.Skeleton,{className:"h-12 w-48 rounded-full"})]})]})})})}e.s(["default",()=>b])}]);