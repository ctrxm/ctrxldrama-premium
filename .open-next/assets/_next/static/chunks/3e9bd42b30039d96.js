(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,73375,e=>{"use strict";let t=(0,e.i(75254).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],73375)},63059,e=>{"use strict";let t=(0,e.i(75254).default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],63059)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},70956,e=>{"use strict";let t=(0,e.i(75254).default)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);e.s(["List",()=>t],70956)},90213,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(29157),l=e.i(73375),i=e.i(63059),r=e.i(31278),n=e.i(63209),d=e.i(70956),o=e.i(22016),c=e.i(18566),h=e.i(50471);function m(){let e=(0,c.useParams)(),m=(0,c.useSearchParams)(),u=e.shortPlayId,p=(0,c.useRouter)(),[x,f]=(0,s.useState)(1),[b,v]=(0,s.useState)(!1),y=(0,s.useRef)(null),g=(0,s.useRef)(null),[w,j]=(0,s.useState)([]),N=e=>{console.log(e)};(0,s.useEffect)(()=>{let e=m.get("ep");e&&f(parseInt(e)||1)},[m]);let{data:k,isLoading:E,error:C}=(0,a.useNetShortDetail)(u||""),L=k?.episodes?.find(e=>e.episodeNo===x),S=(0,s.useCallback)(()=>{if(!k?.episodes)return;let e=x+1;k.episodes.find(t=>t.episodeNo===e)&&(f(e),window.history.replaceState(null,"",`/watch/netshort/${u}?ep=${e}`))},[x,k?.episodes,u]);(0,s.useEffect)(()=>{if(L?.videoUrl&&y.current){let e=y.current,t=L.videoUrl;N(`Loading video: ${t}`),g.current&&(g.current.destroy(),g.current=null);let s=t.includes(".m3u8")||t.includes("application/x-mpegURL"),a=t.includes(".mp4")||t.includes("mime_type=video_mp4");if(s&&h.default.isSupported()){N("Detected HLS stream, initializing HLS.js...");let s=new h.default({debug:!1,enableWorker:!0,xhrSetup:function(e,t){e.withCredentials=!1}});g.current=s,s.loadSource(t),s.attachMedia(e),s.on(h.default.Events.MANIFEST_PARSED,()=>{N("Manifest parsed, playing..."),e.play().catch(e=>N(`Auto-play failed: ${e.message}`))}),s.on(h.default.Events.ERROR,(e,t)=>{console.error(`HLS Error: ${t.type} - ${t.details}`),t.fatal&&s.destroy()})}else{N(a?"Detected MP4/Native stream":"Unknown format, trying native playback"),e.src=t,e.load();let s=e.play();void 0!==s&&s.catch(e=>{N(`Native play failed: ${e.message}`)})}}return()=>{g.current&&(g.current.destroy(),g.current=null)}},[L?.videoUrl]);let R=e=>{f(e),p.replace(`/watch/netshort/${u}?ep=${e}`,{scroll:!1}),v(!1)},z=k?.totalEpisodes||1;return(0,s.useEffect)(()=>{let e=y.current;if(!e)return;let t=L?.subtitleUrl?`/api/proxy/video?url=${encodeURIComponent(L.subtitleUrl)}`:"",s=()=>{if(!t)return;let s=Array.from(e.getElementsByTagName("track")).find(e=>"Indonesia"===e.label&&"id"===e.srclang);if(s)if(s.src===t)return;else e.removeChild(s);let a=document.createElement("track");a.kind="subtitles",a.label="Indonesia",a.srclang="id",a.default=!0,a.src=t,a.onload=()=>{a.track&&(a.track.mode="showing")},e.appendChild(a)},a=()=>{let t=Array.from(e.textTracks).find(e=>"Indonesia"===e.label||"id"===e.language);t&&"showing"!==t.mode&&(t.mode="showing")};s(),e.addEventListener("loadeddata",a),e.addEventListener("canplay",a),e.addEventListener("playing",a),e.addEventListener("seeked",a),g.current&&(g.current.on(h.default.Events.MANIFEST_PARSED,()=>{s(),a()}),g.current.on(h.default.Events.LEVEL_SWITCHED,()=>{s(),a()}));let l=0,i=setInterval(()=>{s(),a(),++l>10&&clearInterval(i)},200);return()=>{e.removeEventListener("loadeddata",a),e.removeEventListener("canplay",a),e.removeEventListener("playing",a),e.removeEventListener("seeked",a),clearInterval(i);try{let s=Array.from(e.getElementsByTagName("track")).find(e=>e.src===t);s&&e.removeChild(s)}catch(e){}}},[L?.subtitleUrl]),(0,t.jsxs)("main",{className:"fixed inset-0 bg-black flex flex-col",children:[(0,t.jsxs)("div",{className:"absolute top-0 left-0 right-0 z-40 h-16 pointer-events-none",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-black/90 via-black/50 to-transparent"}),(0,t.jsxs)("div",{className:"relative z-10 flex items-center justify-between h-full px-4 max-w-7xl mx-auto pointer-events-auto",children:[(0,t.jsxs)(o.default,{href:`/detail/netshort/${u}`,className:"flex items-center gap-2 text-white/90 hover:text-white transition-colors p-2 -ml-2 rounded-full hover:bg-white/10",children:[(0,t.jsx)(l.ChevronLeft,{className:"w-6 h-6"}),(0,t.jsx)("span",{className:"text-primary font-bold hidden sm:inline shadow-black drop-shadow-md",children:"SekaiDrama"})]}),(0,t.jsxs)("div",{className:"text-center flex-1 px-4 min-w-0",children:[(0,t.jsx)("h1",{className:"text-white font-medium truncate text-sm sm:text-base drop-shadow-md",children:k?.title||"Loading..."}),(0,t.jsxs)("p",{className:"text-white/80 text-xs drop-shadow-md",children:["Episode ",x]})]}),(0,t.jsx)("button",{onClick:()=>v(!b),className:"p-2 text-white/90 hover:text-white transition-colors rounded-full hover:bg-white/10",children:(0,t.jsx)(d.List,{className:"w-6 h-6 drop-shadow-md"})})]})]}),(0,t.jsxs)("div",{className:"flex-1 w-full h-full relative bg-black flex flex-col items-center justify-center",children:[(0,t.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center",children:[E&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:(0,t.jsx)(r.Loader2,{className:"w-10 h-10 text-primary animate-spin"})}),C&&(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center p-4 z-20",children:[(0,t.jsx)(n.AlertCircle,{className:"w-10 h-10 text-destructive mb-4"}),(0,t.jsx)("p",{className:"text-white mb-4",children:"Gagal memuat video"}),(0,t.jsx)("button",{onClick:()=>p.refresh(),className:"px-4 py-2 bg-primary text-white rounded-lg text-sm",children:"Coba Lagi"})]}),(0,t.jsx)("video",{ref:y,className:"w-full h-full object-contain max-h-[100dvh]",controls:!0,playsInline:!0,autoPlay:!0,crossOrigin:"anonymous",disableRemotePlayback:!0,referrerPolicy:"no-referrer",onEnded:S})]}),(0,t.jsx)("div",{className:"absolute bottom-20 md:bottom-12 left-0 right-0 z-40 pointer-events-none flex justify-center pb-safe-area-bottom",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 md:gap-6 pointer-events-auto bg-black/60 backdrop-blur-md px-3 py-1.5 md:px-6 md:py-3 rounded-full border border-white/10 shadow-lg transition-all scale-90 md:scale-100 origin-bottom",children:[(0,t.jsx)("button",{onClick:()=>x>1&&R(x-1),disabled:x<=1,className:"p-1.5 md:p-2 rounded-full text-white disabled:opacity-30 hover:bg-white/10 transition-colors",children:(0,t.jsx)(l.ChevronLeft,{className:"w-4 h-4 md:w-6 md:h-6"})}),(0,t.jsxs)("span",{className:"text-white font-medium text-xs md:text-sm tabular-nums min-w-[60px] md:min-w-[80px] text-center",children:["Ep ",x," / ",z]}),(0,t.jsx)("button",{onClick:()=>x<z&&R(x+1),disabled:x>=z,className:"p-1.5 md:p-2 rounded-full text-white disabled:opacity-30 hover:bg-white/10 transition-colors",children:(0,t.jsx)(i.ChevronRight,{className:"w-4 h-4 md:w-6 md:h-6"})})]})})]}),b&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60]",onClick:()=>v(!1)}),(0,t.jsxs)("div",{className:"fixed inset-y-0 right-0 w-72 bg-zinc-900 z-[70] overflow-y-auto border-l border-white/10 shadow-2xl animate-in slide-in-from-right",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-white/10 sticky top-0 bg-zinc-900 z-10 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h2",{className:"font-bold text-white",children:"Daftar Episode"}),(0,t.jsxs)("span",{className:"text-xs text-white/60 bg-white/10 px-2 py-0.5 rounded-full",children:["Total ",z]})]}),(0,t.jsx)("button",{onClick:()=>v(!1),className:"p-1 text-white/70 hover:text-white",children:(0,t.jsx)(i.ChevronRight,{className:"w-6 h-6"})})]}),(0,t.jsx)("div",{className:"p-3 grid grid-cols-5 gap-2",children:k?.episodes?.map(e=>(0,t.jsx)("button",{onClick:()=>R(e.episodeNo),className:`
                    aspect-square flex items-center justify-center rounded-lg text-sm font-medium transition-all
                    ${e.episodeNo===x?"bg-primary text-white shadow-lg shadow-primary/20":"bg-white/5 text-white/70 hover:bg-white/10 hover:text-white"}
                  `,children:e.episodeNo},e.episodeId))})]})]})]})}e.s(["default",()=>m])}]);